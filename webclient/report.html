<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ¥å‘Šåˆ†æ - OS Monitor Pro</title>
    <link rel="stylesheet" href="assets/css/tailwind.min.css">
    <script src="assets/js/anime.min.js"></script>
    <script src="assets/js/echarts.min.js"></script>
    <link href="assets/css/fonts.css" rel="stylesheet">
 
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; }
        .glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
        .health-score { 
            background: conic-gradient(from 0deg, #ef4444 0deg, #fbbf24 120deg, #22c55e 240deg, #22c55e 360deg);
            border-radius: 50%;
            position: relative;
        }
        .health-score::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            background: white;
            border-radius: 50%;
        }
        .score-excellent { color: #059669; }
        .score-good { color: #84cc16; }
        .score-fair { color: #d97706; }
        .score-poor { color: #dc2626; }
        .check-item { transition: all 0.3s ease; }
        .check-item:hover { transform: translateX(4px); }
        .progress-ring { transform: rotate(-90deg); }
        .recommendation-card { transition: all 0.3s ease; }
        .recommendation-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .scan-animation { animation: scan 2s ease-in-out infinite; }
        @keyframes scan {
            0%, 100% { transform: translateY(0); opacity: 0.5; }
            50% { transform: translateY(-10px); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <nav class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-teal-600 rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-sm">OS</span>
                        </div>
                        <h1 class="text-xl font-bold text-gray-900">Monitor Pro</h1>
                    </div>
                </div>
                
                <div class="flex items-center space-x-3">
                    <button id="quickCheckBtn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                        å¿«é€Ÿæ£€æŸ¥
                    </button>
                    <button id="fullScanBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                        å…¨é¢æ‰«æ
                    </button>
                    <button id="exportReportBtn" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                        å¯¼å‡ºæŠ¥å‘Š
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="flex">
        <!-- å·¦ä¾§è¾¹æ  -->
        <div class="w-64 bg-white shadow-sm min-h-screen">
            <div class="p-6">
                <nav class="space-y-2">
                    <a href="index.html" class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors">
                        <span>ğŸ“Š</span>
                        <span>å®æ—¶ä»ªè¡¨ç›˜</span>
                    </a>
                    <a href="snapshot.html" class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors">
                        <span>ğŸ“¸</span>
                        <span>å¿«ç…§ç®¡ç†</span>
                    </a>
                    <a href="report.html" class="flex items-center space-x-3 px-4 py-3 bg-blue-50 text-blue-700 rounded-lg font-medium">
                        <span class="text-blue-600">ğŸ“‹</span>
                        <span>æŠ¥å‘Šåˆ†æ</span>
                    </a>
                    <a href="settings.html" class="flex items-center space-x-3 px-4 py-3 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors">
                        <span>âš™ï¸</span>
                        <span>è®¾ç½®</span>
                    </a>
                </nav>
            </div>

            <!-- å¿«é€Ÿç»Ÿè®¡ -->
            <div class="p-6 border-t border-gray-200">
                <h3 class="text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3">æ£€æŸ¥ç»Ÿè®¡</h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">æ€»æ£€æŸ¥æ¬¡æ•°:</span>
                        <span class="font-medium text-blue-600">156</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">é—®é¢˜å‘ç°:</span>
                        <span class="font-medium text-red-600">23</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">å·²ä¿®å¤:</span>
                        <span class="font-medium text-green-600">18</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-600">å¹³å‡å¾—åˆ†:</span>
                        <span class="font-medium text-yellow-600">78</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒº -->
        <div class="flex-1 p-6">
            <!-- å¥åº·å¾—åˆ†æ¦‚è§ˆ -->
            <div class="mb-8">
                <div class="glass-card rounded-xl p-8">
                    <div class="text-center mb-8">
                        <h2 class="text-3xl font-bold text-gray-900 mb-4">ç³»ç»Ÿå¥åº·æ£€æŸ¥</h2>
                        <p class="text-gray-600">å…¨é¢è¯„ä¼°æ‚¨çš„ç³»ç»Ÿå¥åº·çŠ¶å†µï¼Œå‘ç°é—®é¢˜å¹¶æä¾›ä¼˜åŒ–å»ºè®®</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-center">
                        <!-- å¥åº·å¾—åˆ†åœ†ç¯ -->
                        <div class="text-center">
                            <div class="relative inline-block">
                                <div class="health-score w-48 h-48 flex items-center justify-center">
                                    <div class="relative z-10 text-center">
                                        <div id="healthScore" class="text-4xl font-bold score-fair">72</div>
                                        <div class="text-sm text-gray-600">å¥åº·å¾—åˆ†</div>
                                    </div>
                                </div>
                                <svg class="absolute inset-0 w-48 h-48">
                                    <circle cx="96" cy="96" r="88" stroke="#e5e7eb" stroke-width="8" fill="none"/>
                                    <circle id="scoreProgress" cx="96" cy="96" r="88" stroke="#d97706" stroke-width="8" 
                                            fill="none" stroke-linecap="round" 
                                            stroke-dasharray="552.92" stroke-dashoffset="154.82"/>
                                </svg>
                            </div>
                            <div class="mt-4">
                                <div id="scoreStatus" class="text-lg font-medium score-fair">éœ€è¦å…³æ³¨</div>
                                <div class="text-sm text-gray-600">å»ºè®®è¿›è¡Œç³»ç»Ÿä¼˜åŒ–</div>
                            </div>
                        </div>

                        <!-- æ£€æŸ¥é¡¹ç›®çŠ¶æ€ -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">æ£€æŸ¥é¡¹ç›®</h3>
                            <div class="space-y-3" id="checkItems">
                                <!-- æ£€æŸ¥é¡¹ç›®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>

                        <!-- å¿«é€Ÿæ“ä½œ -->
                        <div class="space-y-4">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">å¿«é€Ÿæ“ä½œ</h3>
                            <div class="space-y-3">
                                <button class="w-full bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-lg font-medium transition-colors text-left">
                                    ğŸ”§ ä¸€é”®ä¼˜åŒ–ç³»ç»Ÿ
                                </button>
                                <button class="w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-3 rounded-lg font-medium transition-colors text-left">
                                    ğŸ§¹ æ¸…ç†åƒåœ¾æ–‡ä»¶
                                </button>
                                <button class="w-full bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-3 rounded-lg font-medium transition-colors text-left">
                                    ğŸ”„ æ›´æ–°é©±åŠ¨ç¨‹åº
                                </button>
                                <button class="w-full bg-purple-500 hover:bg-purple-600 text-white px-4 py-3 rounded-lg font-medium transition-colors text-left">
                                    ğŸ”’ åŠ å¼ºç³»ç»Ÿå®‰å…¨
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è¯¦ç»†æ£€æŸ¥æŠ¥å‘Š -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <!-- æ€§èƒ½åˆ†æ -->
                <div class="glass-card rounded-xl p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-semibold text-gray-900">æ€§èƒ½åˆ†æ</h3>
                        <span class="text-sm text-gray-500">æœ€è¿‘24å°æ—¶</span>
                    </div>
                    <div class="h-64" id="performanceChart"></div>
                </div>

                <!-- èµ„æºä½¿ç”¨è¶‹åŠ¿ -->
                <div class="glass-card rounded-xl p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-semibold text-gray-900">èµ„æºä½¿ç”¨è¶‹åŠ¿</h3>
                        <div class="flex space-x-2">
                            <button class="text-sm px-3 py-1 bg-blue-100 text-blue-700 rounded-lg">1å¤©</button>
                            <button class="text-sm px-3 py-1 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">7å¤©</button>
                            <button class="text-sm px-3 py-1 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">30å¤©</button>
                        </div>
                    </div>
                    <div class="h-64" id="resourceChart"></div>
                </div>
            </div>

            <!-- é—®é¢˜å’Œå»ºè®® -->
            <div class="mb-8">
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-semibold text-gray-900 mb-6">é—®é¢˜è¯Šæ–­ä¸å»ºè®®</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="recommendationsList">
                        <!-- å»ºè®®å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>

            <!-- å†å²æŠ¥å‘Š -->
            <div class="mb-8">
                <div class="glass-card rounded-xl p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-xl font-semibold text-gray-900">å†å²æ£€æŸ¥æŠ¥å‘Š</h3>
                        <button class="text-blue-600 hover:text-blue-800 font-medium">æŸ¥çœ‹å…¨éƒ¨</button>
                    </div>
                    
                    <div class="space-y-4" id="historyReports">
                        <!-- å†å²æŠ¥å‘Šå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ£€æŸ¥è¿›åº¦æ¨¡æ€æ¡† -->
    <div id="checkProgressModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4">
            <div class="text-center">
                <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6 scan-animation">
                    <span class="text-3xl">ğŸ”</span>
                </div>
                <h3 class="text-xl font-semibold mb-2" id="checkTitle">ç³»ç»Ÿå¥åº·æ£€æŸ¥</h3>
                <p class="text-gray-600 mb-6" id="checkDescription">æ­£åœ¨åˆ†ææ‚¨çš„ç³»ç»Ÿ...</p>
                
                <div class="w-full bg-gray-200 rounded-full h-3 mb-4">
                    <div id="checkProgressBar" class="bg-blue-600 h-3 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
                
                <div id="checkStatus" class="text-sm text-gray-500 mb-6">å‡†å¤‡å¼€å§‹...</div>
                
                <button id="cancelCheckBtn" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition-colors">
                    å–æ¶ˆæ£€æŸ¥
                </button>
            </div>
        </div>
    </div>

    <!-- æ£€æŸ¥å®Œæˆæ¨¡æ€æ¡† -->
    <div id="checkCompleteModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center">
        <div class="bg-white rounded-xl p-8 max-w-lg w-full mx-4">
            <div class="text-center">
                <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                    <span class="text-3xl">âœ…</span>
                </div>
                <h3 class="text-xl font-semibold mb-4">æ£€æŸ¥å®Œæˆ</h3>
                
                <div class="bg-gray-50 rounded-lg p-6 mb-6">
                    <div class="text-center mb-4">
                        <div id="finalScore" class="text-4xl font-bold score-fair">72</div>
                        <div class="text-sm text-gray-600">å¥åº·å¾—åˆ†</div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div class="text-center">
                            <div id="problemsFound" class="text-2xl font-bold text-red-600">3</div>
                            <div class="text-gray-600">å‘ç°é—®é¢˜</div>
                        </div>
                        <div class="text-center">
                            <div id="recommendationsCount" class="text-2xl font-bold text-blue-600">5</div>
                            <div class="text-gray-600">ä¼˜åŒ–å»ºè®®</div>
                        </div>
                    </div>
                </div>
                
                <div class="flex space-x-3">
                    <button id="viewDetailsBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-medium transition-colors">
                        æŸ¥çœ‹è¯¦æƒ…
                    </button>
                    <button id="closeCompleteModal" class="bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg font-medium transition-colors">
                        å…³é—­
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æŠ¥å‘Šåˆ†æç³»ç»Ÿ
        class ReportAnalyzer {
            constructor() {
                this.healthScore = 72;
                this.checkItems = [];
                this.recommendations = [];
                this.historyReports = [];
                this.charts = {};
                this.init();
            }

            init() {
                this.generateMockData();
                this.renderCheckItems();
                this.renderRecommendations();
                this.renderHistoryReports();
                this.initCharts();
                this.bindEvents();
                this.animateHealthScore();
            }

            // ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
            generateMockData() {
                this.checkItems = [
                    {
                        name: 'CPUæ€§èƒ½',
                        status: 'warning',
                        score: 65,
                        description: 'CPUä½¿ç”¨ç‡è¾ƒé«˜ï¼Œå»ºè®®å…³é—­ä¸å¿…è¦çš„åº”ç”¨ç¨‹åº',
                        icon: 'ğŸ–¥ï¸'
                    },
                    {
                        name: 'å†…å­˜ä½¿ç”¨',
                        status: 'critical',
                        score: 45,
                        description: 'å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜ï¼Œæ£€æµ‹åˆ°å†…å­˜æ³„æ¼',
                        icon: 'ğŸ’¾'
                    },
                    {
                        name: 'ç£ç›˜ç©ºé—´',
                        status: 'good',
                        score: 85,
                        description: 'ç£ç›˜ç©ºé—´å……è¶³ï¼Œç³»ç»Ÿè¿è¡Œæ­£å¸¸',
                        icon: 'ğŸ’¿'
                    },
                    {
                        name: 'æ³¨å†Œè¡¨å¥åº·',
                        status: 'warning',
                        score: 70,
                        description: 'å‘ç°3å¤„æ³¨å†Œè¡¨å¼‚å¸¸å¢é•¿',
                        icon: 'ğŸ“‹'
                    },
                    {
                        name: 'ç³»ç»Ÿå®‰å…¨',
                        status: 'excellent',
                        score: 92,
                        description: 'ç³»ç»Ÿå®‰å…¨é…ç½®æ­£å¸¸ï¼Œé˜²æŠ¤å®Œå–„',
                        icon: 'ğŸ›¡ï¸'
                    },
                    {
                        name: 'ç½‘ç»œè¿æ¥',
                        status: 'good',
                        score: 78,
                        description: 'ç½‘ç»œè¿æ¥ç¨³å®šï¼Œé€Ÿåº¦è‰¯å¥½',
                        icon: 'ğŸŒ'
                    },
                    {
                        name: 'é©±åŠ¨ç¨‹åº',
                        status: 'warning',
                        score: 68,
                        description: 'å‘ç°2ä¸ªé©±åŠ¨ç¨‹åºéœ€è¦æ›´æ–°',
                        icon: 'ğŸ”§'
                    },
                    {
                        name: 'å¯åŠ¨é¡¹ç®¡ç†',
                        status: 'fair',
                        score: 58,
                        description: 'å¯åŠ¨é¡¹è¾ƒå¤šï¼Œå½±å“å¼€æœºé€Ÿåº¦',
                        icon: 'ğŸš€'
                    }
                ];

                this.recommendations = [
                    {
                        priority: 'high',
                        title: 'å…³é—­å†…å­˜å ç”¨è¿‡é«˜çš„è¿›ç¨‹',
                        description: 'Chromeæµè§ˆå™¨å ç”¨1.2GBå†…å­˜ï¼Œå»ºè®®å…³é—­ä¸å¿…è¦çš„æ ‡ç­¾é¡µä»¥é‡Šæ”¾å†…å­˜',
                        category: 'memory',
                        action: 'close_process',
                        impact: 'high',
                        icon: 'ğŸ§¹'
                    },
                    {
                        priority: 'high',
                        title: 'æ¸…ç†æ³¨å†Œè¡¨åƒåœ¾é¡¹',
                        description: 'æ£€æµ‹åˆ°15ä¸ªæ— æ•ˆçš„æ³¨å†Œè¡¨é¡¹ï¼Œå»ºè®®æ¸…ç†ä»¥æå‡ç³»ç»Ÿæ€§èƒ½',
                        category: 'registry',
                        action: 'cleanup_registry',
                        impact: 'medium',
                        icon: 'ğŸ§½'
                    },
                    {
                        priority: 'medium',
                        title: 'æ›´æ–°æ˜¾å¡é©±åŠ¨ç¨‹åº',
                        description: 'å½“å‰æ˜¾å¡é©±åŠ¨ç‰ˆæœ¬è¾ƒæ—§ï¼Œæ›´æ–°åå¯æå‡å›¾å½¢æ€§èƒ½å’Œç¨³å®šæ€§',
                        category: 'driver',
                        action: 'update_driver',
                        impact: 'medium',
                        icon: 'ğŸ”„'
                    },
                    {
                        priority: 'medium',
                        title: 'ç¦ç”¨ä¸å¿…è¦çš„å¯åŠ¨é¡¹',
                        description: 'ç³»ç»Ÿå¯åŠ¨æ—¶æœ‰12ä¸ªç¨‹åºè‡ªåŠ¨è¿è¡Œï¼Œå»ºè®®ç¦ç”¨éå¿…è¦çš„å¯åŠ¨é¡¹',
                        category: 'startup',
                        action: 'manage_startup',
                        impact: 'medium',
                        icon: 'âš¡'
                    },
                    {
                        priority: 'low',
                        title: 'æ¸…ç†ä¸´æ—¶æ–‡ä»¶',
                        description: 'ç³»ç»Ÿä¸­æœ‰2.3GBçš„ä¸´æ—¶æ–‡ä»¶ï¼Œå®šæœŸæ¸…ç†å¯é‡Šæ”¾ç£ç›˜ç©ºé—´',
                        category: 'cleanup',
                        action: 'clean_temp',
                        impact: 'low',
                        icon: 'ğŸ—‘ï¸'
                    },
                    {
                        priority: 'low',
                        title: 'ä¼˜åŒ–ç³»ç»Ÿè§†è§‰æ•ˆæœ',
                        description: 'è°ƒæ•´è§†è§‰æ•ˆæœè®¾ç½®å¯æå‡ç³»ç»Ÿå“åº”é€Ÿåº¦',
                        category: 'performance',
                        action: 'optimize_visual',
                        impact: 'low',
                        icon: 'âœ¨'
                    }
                ];

                this.historyReports = [
                    {
                        date: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000),
                        score: 78,
                        problems: 2,
                        status: 'good',
                        type: 'weekly'
                    },
                    {
                        date: new Date(Date.now() - 14 * 24 * 60 * 60 * 1000),
                        score: 65,
                        problems: 4,
                        status: 'warning',
                        type: 'weekly'
                    },
                    {
                        date: new Date(Date.now() - 21 * 24 * 60 * 60 * 1000),
                        score: 82,
                        problems: 1,
                        status: 'excellent',
                        type: 'monthly'
                    },
                    {
                        date: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),
                        score: 58,
                        problems: 6,
                        status: 'critical',
                        type: 'monthly'
                    }
                ];
            }

            // æ¸²æŸ“æ£€æŸ¥é¡¹ç›®
            renderCheckItems() {
                const container = document.getElementById('checkItems');
                container.innerHTML = '';

                this.checkItems.forEach(item => {
                    const statusColor = {
                        'excellent': 'text-green-600',
                        'good': 'text-green-500',
                        'fair': 'text-yellow-600',
                        'warning': 'text-orange-600',
                        'critical': 'text-red-600'
                    }[item.status];

                    const statusText = {
                        'excellent': 'ä¼˜ç§€',
                        'good': 'è‰¯å¥½',
                        'fair': 'ä¸€èˆ¬',
                        'warning': 'è­¦å‘Š',
                        'critical': 'å±é™©'
                    }[item.status];

                    const itemElement = document.createElement('div');
                    itemElement.className = 'check-item flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer';
                    
                    itemElement.innerHTML = `
                        <div class="flex items-center space-x-3">
                            <span class="text-lg">${item.icon}</span>
                            <div>
                                <div class="font-medium text-gray-900">${item.name}</div>
                                <div class="text-xs text-gray-500">${item.description}</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-medium ${statusColor}">${item.score}/100</div>
                            <div class="text-xs ${statusColor}">${statusText}</div>
                        </div>
                    `;

                    itemElement.addEventListener('click', () => {
                        this.showItemDetails(item);
                    });

                    container.appendChild(itemElement);
                });
            }

            // æ¸²æŸ“å»ºè®®å¡ç‰‡
            renderRecommendations() {
                const container = document.getElementById('recommendationsList');
                container.innerHTML = '';

                this.recommendations.forEach(rec => {
                    const priorityColor = {
                        'high': 'border-red-200 bg-red-50',
                        'medium': 'border-yellow-200 bg-yellow-50',
                        'low': 'border-blue-200 bg-blue-50'
                    }[rec.priority];

                    const priorityText = {
                        'high': 'é«˜ä¼˜å…ˆçº§',
                        'medium': 'ä¸­ä¼˜å…ˆçº§',
                        'low': 'ä½ä¼˜å…ˆçº§'
                    }[rec.priority];

                    const recElement = document.createElement('div');
                    recElement.className = `recommendation-card p-6 rounded-xl border-2 ${priorityColor}`;
                    
                    recElement.innerHTML = `
                        <div class="flex items-start space-x-4">
                            <div class="text-2xl">${rec.icon}</div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2 mb-2">
                                    <h4 class="font-semibold text-gray-900">${rec.title}</h4>
                                    <span class="px-2 py-1 text-xs rounded-full ${
                                        rec.priority === 'high' ? 'bg-red-100 text-red-800' :
                                        rec.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' :
                                        'bg-blue-100 text-blue-800'
                                    }">
                                        ${priorityText}
                                    </span>
                                </div>
                                <p class="text-gray-600 text-sm mb-3">${rec.description}</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-gray-500">å½±å“ç¨‹åº¦: ${rec.impact}</span>
                                    <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors" onclick="reportAnalyzer.applyRecommendation('${rec.action}')">
                                        ç«‹å³ä¿®å¤
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;

                    container.appendChild(recElement);
                });
            }

            // æ¸²æŸ“å†å²æŠ¥å‘Š
            renderHistoryReports() {
                const container = document.getElementById('historyReports');
                container.innerHTML = '';

                this.historyReports.forEach(report => {
                    const statusColor = {
                        'excellent': 'text-green-600',
                        'good': 'text-green-500',
                        'warning': 'text-yellow-600',
                        'critical': 'text-red-600'
                    }[report.status];

                    const statusText = {
                        'excellent': 'ä¼˜ç§€',
                        'good': 'è‰¯å¥½',
                        'warning': 'è­¦å‘Š',
                        'critical': 'å±é™©'
                    }[report.status];

                    const reportElement = document.createElement('div');
                    reportElement.className = 'flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer';
                    
                    reportElement.innerHTML = `
                        <div class="flex items-center space-x-4">
                            <div class="text-center">
                                <div class="text-lg font-bold ${statusColor}">${report.score}</div>
                                <div class="text-xs ${statusColor}">${statusText}</div>
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">
                                    ${report.type === 'weekly' ? 'å‘¨åº¦æ£€æŸ¥' : 'æœˆåº¦æ£€æŸ¥'} - ${report.date.toLocaleDateString('zh-CN')}
                                </div>
                                <div class="text-sm text-gray-600">
                                    å‘ç°é—®é¢˜: ${report.problems}ä¸ª
                                </div>
                            </div>
                        </div>
                        <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                            æŸ¥çœ‹è¯¦æƒ… â†’
                        </button>
                    `;

                    container.appendChild(reportElement);
                });
            }

            // åˆå§‹åŒ–å›¾è¡¨
            initCharts() {
                // æ€§èƒ½åˆ†æå›¾è¡¨
                this.charts.performance = echarts.init(document.getElementById('performanceChart'));
                this.charts.performance.setOption({
                    tooltip: { trigger: 'axis' },
                    legend: { data: ['CPU', 'å†…å­˜', 'ç£ç›˜'] },
                    grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                    xAxis: {
                        type: 'category',
                        data: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00']
                    },
                    yAxis: { type: 'value', axisLabel: { formatter: '{value}%' } },
                    series: [
                        {
                            name: 'CPU',
                            type: 'line',
                            smooth: true,
                            data: [45, 52, 38, 67, 73, 48, 42],
                            itemStyle: { color: '#059669' },
                            areaStyle: { color: 'rgba(5, 150, 105, 0.1)' }
                        },
                        {
                            name: 'å†…å­˜',
                            type: 'line',
                            smooth: true,
                            data: [78, 82, 75, 85, 88, 80, 76],
                            itemStyle: { color: '#d97706' },
                            areaStyle: { color: 'rgba(217, 119, 6, 0.1)' }
                        },
                        {
                            name: 'ç£ç›˜',
                            type: 'line',
                            smooth: true,
                            data: [32, 28, 35, 45, 38, 30, 29],
                            itemStyle: { color: '#3b82f6' },
                            areaStyle: { color: 'rgba(59, 130, 246, 0.1)' }
                        }
                    ]
                });

                // èµ„æºä½¿ç”¨è¶‹åŠ¿å›¾è¡¨
                this.charts.resource = echarts.init(document.getElementById('resourceChart'));
                this.charts.resource.setOption({
                    tooltip: { trigger: 'axis' },
                    legend: { data: ['å¯ç”¨å†…å­˜', 'å·²ç”¨ç£ç›˜'] },
                    grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                    xAxis: {
                        type: 'category',
                        data: ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥']
                    },
                    yAxis: { type: 'value' },
                    series: [
                        {
                            name: 'å¯ç”¨å†…å­˜',
                            type: 'bar',
                            data: [3.2, 2.8, 3.5, 2.1, 2.9, 3.8, 4.1],
                            itemStyle: { color: '#22c55e' }
                        },
                        {
                            name: 'å·²ç”¨ç£ç›˜',
                            type: 'bar',
                            data: [398, 402, 395, 410, 405, 390, 385],
                            itemStyle: { color: '#f59e0b' }
                        }
                    ]
                });
            }

            // åŠ¨ç”»æ˜¾ç¤ºå¥åº·å¾—åˆ†
            animateHealthScore() {
                const scoreElement = document.getElementById('healthScore');
                const progressElement = document.getElementById('scoreProgress');
                const statusElement = document.getElementById('scoreStatus');
                
                let currentScore = 0;
                const targetScore = this.healthScore;
                const circumference = 2 * Math.PI * 88; // r=88
                
                const animate = () => {
                    if (currentScore < targetScore) {
                        currentScore += 1;
                        scoreElement.textContent = currentScore;
                        
                        const offset = circumference - (currentScore / 100) * circumference;
                        progressElement.style.strokeDashoffset = offset;
                        
                        // æ›´æ–°çŠ¶æ€å’Œé¢œè‰²
                        if (currentScore >= 90) {
                            scoreElement.className = 'text-4xl font-bold score-excellent';
                            statusElement.textContent = 'ä¼˜ç§€';
                            statusElement.className = 'text-lg font-medium score-excellent';
                            progressElement.style.stroke = '#059669';
                        } else if (currentScore >= 75) {
                            scoreElement.className = 'text-4xl font-bold score-good';
                            statusElement.textContent = 'è‰¯å¥½';
                            statusElement.className = 'text-lg font-medium score-good';
                            progressElement.style.stroke = '#84cc16';
                        } else if (currentScore >= 60) {
                            scoreElement.className = 'text-4xl font-bold score-fair';
                            statusElement.textContent = 'éœ€è¦å…³æ³¨';
                            statusElement.className = 'text-lg font-medium score-fair';
                            progressElement.style.stroke = '#d97706';
                        } else {
                            scoreElement.className = 'text-4xl font-bold score-poor';
                            statusElement.textContent = 'éœ€è¦ä¿®å¤';
                            statusElement.className = 'text-lg font-medium score-poor';
                            progressElement.style.stroke = '#dc2626';
                        }
                        
                        requestAnimationFrame(animate);
                    }
                };
                
                animate();
            }

            // æ˜¾ç¤ºæ£€æŸ¥é¡¹ç›®è¯¦æƒ…
            showItemDetails(item) {
                alert(`${item.name} è¯¦ç»†ä¿¡æ¯\n\nå¾—åˆ†: ${item.score}/100\nçŠ¶æ€: ${item.status}\n\n${item.description}\n\nç‚¹å‡»æŸ¥çœ‹è¯¦ç»†åˆ†æå’Œä¿®å¤å»ºè®®ã€‚`);
            }

            // åº”ç”¨å»ºè®®
            applyRecommendation(action) {
                const actions = {
                    'close_process': 'æ­£åœ¨å…³é—­é«˜å†…å­˜å ç”¨è¿›ç¨‹...',
                    'cleanup_registry': 'æ­£åœ¨æ¸…ç†æ³¨å†Œè¡¨...',
                    'update_driver': 'æ­£åœ¨æ£€æŸ¥é©±åŠ¨ç¨‹åºæ›´æ–°...',
                    'manage_startup': 'æ­£åœ¨ç®¡ç†å¯åŠ¨é¡¹...',
                    'clean_temp': 'æ­£åœ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶...',
                    'optimize_visual': 'æ­£åœ¨ä¼˜åŒ–è§†è§‰æ•ˆæœ...'
                };
                
                alert(`æ‰§è¡Œæ“ä½œ: ${actions[action] || 'æ­£åœ¨æ‰§è¡Œä¼˜åŒ–æ“ä½œ...'}\n\næ“ä½œå®Œæˆåç³»ç»Ÿæ€§èƒ½å°†å¾—åˆ°æ”¹å–„ã€‚`);
            }

            // æ˜¾ç¤ºæ£€æŸ¥è¿›åº¦
            showCheckProgress(type) {
                const modal = document.getElementById('checkProgressModal');
                const title = document.getElementById('checkTitle');
                const description = document.getElementById('checkDescription');
                const progressBar = document.getElementById('checkProgressBar');
                const status = document.getElementById('checkStatus');
                
                const checkConfig = {
                    quick: {
                        title: 'å¿«é€Ÿæ£€æŸ¥',
                        description: 'æ­£åœ¨æ‰§è¡Œå¿«é€Ÿç³»ç»Ÿå¥åº·æ£€æŸ¥...',
                        steps: [
                            { progress: 20, status: 'æ£€æŸ¥CPUæ€§èƒ½...', delay: 300 },
                            { progress: 40, status: 'æ£€æŸ¥å†…å­˜ä½¿ç”¨...', delay: 400 },
                            { progress: 60, status: 'æ£€æŸ¥ç£ç›˜çŠ¶æ€...', delay: 300 },
                            { progress: 80, status: 'æ£€æŸ¥ç³»ç»Ÿå®‰å…¨...', delay: 400 },
                            { progress: 100, status: 'æ£€æŸ¥å®Œæˆï¼', delay: 300 }
                        ]
                    },
                    full: {
                        title: 'å…¨é¢æ‰«æ',
                        description: 'æ­£åœ¨æ‰§è¡Œæ·±åº¦ç³»ç»Ÿåˆ†æå’Œæ‰«æ...',
                        steps: [
                            { progress: 10, status: 'åˆ†æCPUæ€§èƒ½...', delay: 500 },
                            { progress: 20, status: 'æ£€æµ‹å†…å­˜æ³„æ¼...', delay: 800 },
                            { progress: 30, status: 'æ‰«æç£ç›˜é”™è¯¯...', delay: 600 },
                            { progress: 40, status: 'æ£€æŸ¥æ³¨å†Œè¡¨å®Œæ•´æ€§...', delay: 900 },
                            { progress: 50, status: 'éªŒè¯ç³»ç»Ÿæ–‡ä»¶...', delay: 700 },
                            { progress: 60, status: 'æ£€æŸ¥é©±åŠ¨ç¨‹åº...', delay: 800 },
                            { progress: 70, status: 'æ‰«ææ¶æ„è½¯ä»¶...', delay: 1000 },
                            { progress: 80, status: 'æ£€æŸ¥ç½‘ç»œé…ç½®...', delay: 600 },
                            { progress: 90, status: 'åˆ†æå¯åŠ¨é¡¹...', delay: 500 },
                            { progress: 100, status: 'æ‰«æå®Œæˆï¼', delay: 400 }
                        ]
                    }
                };
                
                const config = checkConfig[type];
                title.textContent = config.title;
                description.textContent = config.description;
                modal.classList.remove('hidden');
                
                let currentStep = 0;
                const executeStep = () => {
                    if (currentStep < config.steps.length) {
                        const step = config.steps[currentStep];
                        progressBar.style.width = step.progress + '%';
                        status.textContent = step.status;
                        
                        setTimeout(() => {
                            currentStep++;
                            executeStep();
                        }, step.delay);
                    } else {
                        setTimeout(() => {
                            modal.classList.add('hidden');
                            this.showCheckComplete(type);
                        }, 1000);
                    }
                };
                
                executeStep();
            }

            // æ˜¾ç¤ºæ£€æŸ¥å®Œæˆ
            showCheckComplete(type) {
                const modal = document.getElementById('checkCompleteModal');
                const score = document.getElementById('finalScore');
                const problems = document.getElementById('problemsFound');
                const recommendations = document.getElementById('recommendationsCount');
                
                // ç”Ÿæˆæ–°çš„æ£€æŸ¥ç»“æœ
                const newScore = Math.floor(Math.random() * 30) + 60;
                const newProblems = Math.floor(Math.random() * 5) + 1;
                const newRecommendations = Math.floor(Math.random() * 5) + 3;
                
                score.textContent = newScore;
                problems.textContent = newProblems;
                recommendations.textContent = newRecommendations;
                
                // æ›´æ–°å¥åº·å¾—åˆ†
                this.healthScore = newScore;
                this.animateHealthScore();
                
                modal.classList.remove('hidden');
            }

            // ç»‘å®šäº‹ä»¶
            bindEvents() {
                // å¿«é€Ÿæ£€æŸ¥æŒ‰é’®
                document.getElementById('quickCheckBtn').addEventListener('click', () => {
                    this.showCheckProgress('quick');
                });

                // å…¨é¢æ‰«ææŒ‰é’®
                document.getElementById('fullScanBtn').addEventListener('click', () => {
                    this.showCheckProgress('full');
                });

                // å¯¼å‡ºæŠ¥å‘ŠæŒ‰é’®
                document.getElementById('exportReportBtn').addEventListener('click', () => {
                    this.exportReport();
                });

                // å–æ¶ˆæ£€æŸ¥æŒ‰é’®
                document.getElementById('cancelCheckBtn').addEventListener('click', () => {
                    document.getElementById('checkProgressModal').classList.add('hidden');
                });

                // æŸ¥çœ‹è¯¦æƒ…æŒ‰é’®
                document.getElementById('viewDetailsBtn').addEventListener('click', () => {
                    document.getElementById('checkCompleteModal').classList.add('hidden');
                });

                // å…³é—­å®Œæˆæ¨¡æ€æ¡†
                document.getElementById('closeCompleteModal').addEventListener('click', () => {
                    document.getElementById('checkCompleteModal').classList.add('hidden');
                });

                // å¿«é€Ÿæ“ä½œæŒ‰é’®
                document.querySelectorAll('.bg-green-500, .bg-blue-500, .bg-yellow-500, .bg-purple-500').forEach(btn => {
                    if (btn.textContent.includes('ä¸€é”®ä¼˜åŒ–') || btn.textContent.includes('æ¸…ç†åƒåœ¾') || 
                        btn.textContent.includes('æ›´æ–°é©±åŠ¨') || btn.textContent.includes('åŠ å¼ºå®‰å…¨')) {
                        btn.addEventListener('click', () => {
                            alert(`æ‰§è¡Œæ“ä½œ: ${btn.textContent.trim()}\n\næ­¤åŠŸèƒ½å°†åœ¨å®é™…åº”ç”¨ä¸­æ‰§è¡Œç›¸åº”çš„ç³»ç»Ÿä¼˜åŒ–æ“ä½œã€‚`);
                        });
                    }
                });
            }

            // å¯¼å‡ºæŠ¥å‘Š
            exportReport() {
                alert('æŠ¥å‘Šå¯¼å‡ºåŠŸèƒ½\n\næ­¤åŠŸèƒ½å°†ç”ŸæˆåŒ…å«ä»¥ä¸‹å†…å®¹çš„è¯¦ç»†æŠ¥å‘Šï¼š\n- ç³»ç»Ÿå¥åº·å¾—åˆ†\n- å„é¡¹æ£€æŸ¥è¯¦ç»†ç»“æœ\n- é—®é¢˜è¯Šæ–­å’Œå»ºè®®\n- æ€§èƒ½è¶‹åŠ¿å›¾è¡¨\n- å†å²å¯¹æ¯”æ•°æ®\n\næ”¯æŒå¯¼å‡ºä¸ºPDFã€HTMLå’ŒWordæ ¼å¼ã€‚');
            }
        }

        // åˆå§‹åŒ–æŠ¥å‘Šåˆ†æå™¨
        document.addEventListener('DOMContentLoaded', () => {
            window.reportAnalyzer = new ReportAnalyzer();
            
            // å“åº”å¼å›¾è¡¨è°ƒæ•´
            window.addEventListener('resize', () => {
                Object.values(window.reportAnalyzer.charts).forEach(chart => {
                    chart.resize();
                });
            });
        });
    </script>
</body>
</html>